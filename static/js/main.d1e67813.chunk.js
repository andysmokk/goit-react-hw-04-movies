(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{11:function(e,t,c){e.exports={link:"Navigation_link__1VrIW",activeLink:"Navigation_activeLink__3J6XK Navigation_link__1VrIW"}},24:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),a=c(17),r=c.n(a),s=c(7),o=(c(24),c(2)),l=c(11),j=c.n(l),h=c(0),u=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("nav",{children:[Object(h.jsx)(s.c,{exact:!0,to:"/",className:j.a.link,activeClassName:j.a.activeLink,children:"Home"}),Object(h.jsx)(s.c,{to:"/movies",className:j.a.link,activeClassName:j.a.activeLink,children:"Movies"})]}),Object(h.jsx)("hr",{})]})},b=c(8),d="80c40df4ca7e037eb588a248bc1cafa9",O="https://api.themoviedb.org/3";var f={fetchTrendingMovies:function(){return fetch("".concat(O,"/trending/movie/day?api_key=").concat(d)).then((function(e){return e.json()}))},fetchMovie:function(e){return fetch("".concat(O,"/search/movie?query=").concat(e,"&language=en-US&api_key=").concat(d)).then((function(e){return e.json()}))},fetchMovieDetail:function(e){return fetch("".concat(O,"/movie/").concat(e,"?language=en-US&api_key=").concat(d)).then((function(e){return e.json()}))},fetchMovieCast:function(e){return fetch("".concat(O,"/movie/").concat(e,"/credits?language=en-US&api_key=").concat(d)).then((function(e){return e.json()}))},fetchMovieReviews:function(e){return fetch("".concat(O,"/movie/").concat(e,"/reviews?language=en-US&api_key=").concat(d)).then((function(e){return e.json()}))}};function v(){var e=Object(o.g)(),t=Object(n.useState)(null),c=Object(b.a)(t,2),i=c[0],a=c[1];return Object(n.useEffect)((function(){f.fetchTrendingMovies().then((function(e){return a(e.results)}))}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Trending today"}),Object(h.jsx)("ul",{children:i&&i.map((function(t){return Object(h.jsx)("li",{children:Object(h.jsxs)(s.b,{to:{pathname:"/movies/".concat(t.id),state:{from:{location:e,label:"GO HOME PAGE"}}},children:[t.title," ",t.release_date?"(".concat(t.release_date.substring(0,4),")"):t.release_date]})},t.id)}))})]})}var x=c(15);function m(){var e=Object(o.f)(),t=Object(o.g)(),c=Object(n.useState)(""),i=Object(b.a)(c,2),a=i[0],r=i[1],l=Object(n.useState)([]),j=Object(b.a)(l,2),u=j[0],d=j[1];console.log(e),console.log(t);var O=new URLSearchParams(t.search).get("query");console.log(O),console.log(t.search),Object(n.useEffect)((function(){O&&f.fetchMovie(O).then((function(e){return d(e.results)})).catch((function(e){return console.log(e)}))}),[O]);return console.log(a),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{onSubmit:function(c){c.preventDefault(),c.target[0].value&&(r(c.target[0].value),e.push(Object(x.a)(Object(x.a)({},t),{},{search:"query=".concat(c.target[0].value)})),f.fetchMovie(c.target[0].value).then((function(e){return d(e.results)})).catch((function(e){return console.log(e)})).finally(c.target[0].value=""))},children:[Object(h.jsx)("input",{type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movie"}),Object(h.jsx)("button",{type:"submit",children:Object(h.jsx)("span",{children:"Search"})})]}),Object(h.jsx)("ul",{children:u&&u.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsxs)(s.b,{to:{pathname:"/movies/".concat(e.id),state:{from:{location:t,label:"GO MOVIES PAGE"}}},children:[e.title," ",e.release_date?"(".concat(e.release_date.substring(0,4),")"):e.release_date]})},e.id)}))})]})}function g(){return Object(h.jsx)("h1",{children:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})}var p=function(e){var t=e.movieId,c=Object(n.useState)([]),i=Object(b.a)(c,2),a=i[0],r=i[1];return Object(n.useEffect)((function(){f.fetchMovieCast(t).then((function(e){return r(e.cast)}))}),[t]),console.log(a),0!==a.length?Object(h.jsx)("ul",{children:a&&a.map((function(e){return Object(h.jsxs)("li",{children:[e.profile_path?Object(h.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w300").concat(e.profile_path),alt:e.name}):Object(h.jsx)("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg",alt:"default_img",width:"300"}),Object(h.jsxs)("p",{children:["Character: ",e.character]}),Object(h.jsx)("p",{children:e.name})]},e.id)}))}):Object(h.jsx)("p",{children:"No information"})};var _=function(e){var t=e.movieId,c=Object(n.useState)([]),i=Object(b.a)(c,2),a=i[0],r=i[1];return Object(n.useEffect)((function(){f.fetchMovieReviews(t).then((function(e){return r(e.results)}))}),[t]),console.log(a),0!==a.length?Object(h.jsx)("ul",{children:a.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsx)("p",{children:e.author}),Object(h.jsx)("p",{children:e.content})]},e.id)}))}):Object(h.jsx)("p",{children:"We don't have any reviews for this movie"})};function w(){var e,t,c,i=Object(o.i)(),a=Object(o.f)(),r=Object(o.g)(),l=Object(o.h)().movieId,j=Object(n.useState)(null),u=Object(b.a)(j,2),d=u[0],O=u[1];Object(n.useEffect)((function(){f.fetchMovieDetail(l).then((function(e){return O(e)}))}),[l]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{type:"submit",onClick:function(e){var t,c,n;a.push(null!==(t=null===r||void 0===r||null===(c=r.state)||void 0===c||null===(n=c.from)||void 0===n?void 0:n.location)&&void 0!==t?t:"/")},children:null!==(e=null===r||void 0===r||null===(t=r.state)||void 0===t||null===(c=t.from)||void 0===c?void 0:c.label)&&void 0!==e?e:"GO BACK"}),d&&Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w500").concat(d.poster_path),alt:""}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{children:[d.title," ",d.release_date?"(".concat(d.release_date.substring(0,4),")"):d.release_date]}),Object(h.jsxs)("p",{children:["User Score: ",d.vote_average]}),Object(h.jsx)("h2",{children:"Overview"}),Object(h.jsx)("p",{children:d.overview}),Object(h.jsx)("h2",{children:"Genres"}),Object(h.jsx)("div",{children:d.genres&&d.genres.map((function(e){return Object(h.jsx)("ul",{children:Object(h.jsx)("li",{children:e.name})},e.id)}))})]})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Additional information"}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(s.b,{to:{pathname:"".concat(i.url,"/cast"),state:{from:{location:r,label:"GO BACK"}}},children:"Cast"})}),Object(h.jsx)("li",{children:Object(h.jsx)(s.b,{to:{pathname:"".concat(i.url,"/reviews"),state:{from:{location:r,label:"GO BACK"}}},children:"Reviews"})})]}),Object(h.jsx)("hr",{})]}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"".concat(i.path,"/cast"),children:Object(h.jsx)(p,{movieId:l})}),Object(h.jsx)(o.a,{path:"".concat(i.path,"/reviews"),children:Object(h.jsx)(_,{movieId:l})})]})]})}var k=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u,{}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{exact:!0,path:"/",children:Object(h.jsx)(v,{})}),Object(h.jsx)(o.a,{path:"/movies",exact:!0,children:Object(h.jsx)(m,{})}),Object(h.jsx)(o.a,{path:"/movies/:movieId",children:Object(h.jsx)(w,{})}),Object(h.jsx)(o.a,{children:Object(h.jsx)(g,{})})]})]})};r.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(s.a,{children:Object(h.jsx)(k,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.d1e67813.chunk.js.map